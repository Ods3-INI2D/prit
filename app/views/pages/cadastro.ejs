<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/estilo.css">
    <link rel="stylesheet" href="/css/cad.css">
    <link rel="stylesheet" href="/css/toggle-senha.css">
</head>
<body>
    <%
    var cssErro = {nome: "", nasc: "", cpf: "", tel: "", email: "", senhan: "", csenha: ""} 
    var msgErro = {nome: "", nasc: "", cpf: "", tel: "", email: "", senhan: "", csenha: ""}
    if(erros) { 
        listaErros.errors.forEach(function(itemErro){
            if (itemErro.path == "nome"){ 
                cssErro.nome = "erro";
                msgErro.nome = itemErro.msg;
            } 
            if (itemErro.path == "nasc"){ 
                cssErro.nasc = "erro";
                msgErro.nasc = itemErro.msg;         
            } 
            if (itemErro.path == "cpf"){
                cssErro.cpf = "erro";
                msgErro.cpf = itemErro.msg;         
            }
            if (itemErro.path == "tel"){
                cssErro.tel = "erro";
                msgErro.tel = itemErro.msg;         
            }
            if (itemErro.path == "email"){ 
                cssErro.email = "erro";
                msgErro.email = itemErro.msg;
            }
            if (itemErro.path == "senhan"){
                cssErro.senhan = "erro";
                msgErro.senhan = itemErro.msg;         
            }
            if (itemErro.path == "csenha"){
                cssErro.csenha = "erro";
                msgErro.csenha = itemErro.msg;         
            }
        }); 
    }; %>
    
    <header>
        <img class="icon" src="/imagens/logo.png" alt="Logo">
    </header>
    
    <main>
        <section class="txt">
            <h1 class="tit">Cadastro</h1>

            <form method="POST" action="/cadastro" novalidate>
                <fieldset>
                    <legend>
                        <h2>Nome</h2>
                    </legend>
                    <label for="nome">
                        <input type="text" placeholder="Seu nome" name="nome" id="nome" value="<%= valores.nome %>" class="<%= cssErro.nome %>" required>
                    </label>
                    <% if(msgErro.nome) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.nome %></output>
                    <% } %>
                </fieldset>

                <fieldset>
                    <legend>
                        <h2>Data de Nascimento</h2>
                    </legend>
                    <label for="nasc">
                        <input type="date" name="nasc" id="nasc" value="<%= valores.nasc %>" class="<%= cssErro.nasc %>" required>
                    </label>
                    <% if(msgErro.nasc) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.nasc %></output>
                    <% } %>
                </fieldset>

                <fieldset>
                    <legend>
                        <h2>CPF</h2>
                    </legend>
                    <label for="cpf">
                        <input type="text" placeholder="Seu CPF" name="cpf" id="cpf" value="<%= valores.cpf %>" class="<%= cssErro.cpf %>" maxlength="11" required>
                    </label>
                    <% if(msgErro.cpf) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.cpf %></output>
                    <% } %>
                </fieldset>

                <fieldset>
                    <legend>
                        <h2>Telefone</h2>
                    </legend>
                    <label for="tel">
                        <input type="tel" placeholder="Seu Telefone" name="tel" id="tel" value="<%= valores.tel %>" class="<%= cssErro.tel %>" maxlength="9" required>
                    </label>
                    <% if(msgErro.tel) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.tel %></output>
                    <% } %>
                </fieldset>

                <fieldset>
                    <legend>
                        <h2>E-mail</h2>
                    </legend>
                    <label for="email">
                        <input type="email" placeholder="exemplo@dominio.com" name="email" id="email" value="<%= valores.email %>" class="<%= cssErro.email %>" required>
                    </label>
                    <% if(msgErro.email) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.email %></output>
                    <% } %>
                </fieldset>

                <fieldset>
                    <legend>
                        <h2>Senha</h2>
                    </legend>
                    <label for="senhan" class="campo-senha">
                        <input type="password" placeholder="Sua Senha" name="senhan" id="senhan" value="<%= valores.senhan %>" class="<%= cssErro.senhan %>" required>
                        <button type="button" class="btn-toggle-senha" aria-label="Mostrar senha" data-target="senhan"></button>
                    </label>
                    <% if(msgErro.senhan) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.senhan %></output>
                    <% } %>
                </fieldset>

                <fieldset>
                    <legend>
                        <h2>Confirmar Senha</h2>
                    </legend>
                    <label for="senha" class="campo-senha">
                        <input type="password" placeholder="Confirme sua Senha" name="csenha" id="senha" value="<%= valores.csenha %>" class="<%= cssErro.csenha %>" required>
                        <button type="button" class="btn-toggle-senha" aria-label="Mostrar senha" data-target="senha"></button>
                    </label>
                    <% if(msgErro.csenha) { %>
                        <output class="erro" aria-live="polite"><%= msgErro.csenha %></output>
                    <% } %>
                </fieldset>

                <button id="btn" type="submit">Cadastro</button>

                <nav>
                    <p>
                        <a href="/login" class="link">JÃ¡ tem uma conta?
                            <strong class="link2">Entre aqui</strong>
                        </a>
                    </p>
                </nav>
            </form>
        </section>
    </main>

    <footer>
        <nav>
            <a href="/home">home</a>
        </nav>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButtons = document.querySelectorAll('.btn-toggle-senha');
            
            toggleButtons.forEach(function(button) {
                button.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    const input = document.getElementById(targetId);
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        this.setAttribute('aria-label', 'Ocultar senha');
                    } else {
                        input.type = 'password';
                        this.setAttribute('aria-label', 'Mostrar senha');
                    }
                });
            });
        });
    </script>
</body>
</html>